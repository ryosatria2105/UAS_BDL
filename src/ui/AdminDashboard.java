
package ui;

import Dialog.DialogBarang;
import Dialog.DialogDetailPenjualan;
import Dialog.DialogDetailRestock;
import Dialog.DialogJenisPembayaran;
import Dialog.DialogKategori;
import Dialog.DialogPegawai;
import Dialog.DialogPembeli;
import Dialog.DialogRestock;
import Dialog.DialogSupplier;

import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import java.util.List;
import javax.swing.BorderFactory;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.JTable;

import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;

import model.Barang;
import model.JenisPembayaran;
import model.Kategori;
import model.Pegawai;
import model.Pembeli;
import model.Supplier;

import report.ReportUtil;

import service.BarangService;
import service.JenisPembayaranService;
import service.KategoriService;
import service.PegawaiService;
import service.PembayaranService;
import service.PembeliService;
import service.PenjualanService;
import service.RestockService;
import service.SupplierService;

import util.DBConnection;


/**
 *
 * @author ryo not rio
 */
public class AdminDashboard extends javax.swing.JFrame {

    private String namaUser;
    private String idPegawaiLogin;
    private String namaPegawaiLogin;
    

    /**
     * Creates new form AdminDashboard
     */
     public AdminDashboard() {
        initComponents();
        

        refreshDashboard();

        setTableModels();
loadDashboardData();

        
        
        styleTableHeader(tableKategori);
styleTableHeader(tableSupplier);
styleTableHeader(tableBarang);
styleTableHeader(tablePegawai);
styleTableHeader(tablePembeli);
styleTableHeader(tableJenisPembayaran);

styleTableHeader(tblRiwayatPenjualan);
styleTableHeader(tblRestock);
styleTableHeader(tblHistoriPembayaran);

 // STYLE TAB
    styleTabs(tabMasterData);
    styleTabs(jTabbedPenjualan);
    styleTabs(tabKeuangan);

        
        
        loadTableJenisPembayaran();
        loadTableRiwayatPenjualan();

        tabKeuangan.addChangeListener(e -> {
            if (tabKeuangan.getSelectedIndex() == 1) {
                loadHistoriPembayaran();
            }
        });

        loadTableKategori();
        loadTableSupplier();
        loadTableBarang();
        loadTablePegawai(); // kalo udah ada getAll
        loadTablePembeli();

        setupTableHistoriPembayaran();

        this.setExtendedState(JFrame.MAXIMIZED_BOTH);

        // SET CARD LAYOUT
        panelIndicatorDashboard.setVisible(true);
        panelIndicatorMaster.setVisible(false);
        panelIndicatorRiwayat.setVisible(false);
        panelIndicatorKeuangan.setVisible(false);

        setActiveMenu(panelNavDashboard);

        setActiveMenu(panelNavDashboard);

        panelContent.setLayout(new CardLayout());

        panelContent.add(panelDashboard, "dashboard");
        panelContent.add(panelMasterData, "master");
        panelContent.add(panelRiwayatPenjualan, "riwayat");
        panelContent.add(panelKeuangan, "keuangan");

        showPanel("dashboard");
        applyDashboardStyle();

    }

    private void loadHistoriPembayaran() {
        PembayaranService service = new PembayaranService();
        List<Object[]> list = service.getHistori();

        DefaultTableModel model = (DefaultTableModel) tblHistoriPembayaran.getModel();
        model.setRowCount(0);

        for (Object[] row : list) {
            model.addRow(row);
        }
    }

    public AdminDashboard(String idPegawai, String namaPegawai) {
        this();
        this.idPegawaiLogin = idPegawai;
        this.namaPegawaiLogin = namaPegawai;
        setTitle("Admin Dashboard - " + namaPegawai);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        dashboard2 = new javax.swing.JPanel();
        dashboard3 = new javax.swing.JPanel();
        lblTitle4 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenu2 = new javax.swing.JMenu();
        jMenuItem4 = new javax.swing.JMenuItem();
        panelUtama = new javax.swing.JPanel();
        panelSidebar = new javax.swing.JPanel();
        jSeparator1 = new javax.swing.JSeparator();
        lblTitle2 = new javax.swing.JLabel();
        panelNavDashboard = new javax.swing.JPanel();
        panelIndicatorDashboard = new javax.swing.JPanel();
        lblNavDashboard = new javax.swing.JLabel();
        panelNavMaster = new javax.swing.JPanel();
        panelIndicatorMaster = new javax.swing.JPanel();
        lblTitle1 = new javax.swing.JLabel();
        panelNavRiwayat = new javax.swing.JPanel();
        panelIndicatorRiwayat = new javax.swing.JPanel();
        lblNavRiwayat = new javax.swing.JLabel();
        panelNavKeuangan = new javax.swing.JPanel();
        panelIndicatorKeuangan = new javax.swing.JPanel();
        lblNavKeuangan = new javax.swing.JLabel();
        btnLogout5 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        panelAtas = new javax.swing.JPanel();
        jLabel10 = new javax.swing.JLabel();
        panelContent = new javax.swing.JPanel();
        panelDashboard = new javax.swing.JPanel();
        lblTerlarisTitle = new javax.swing.JLabel();
        scrollStokKritis = new javax.swing.JScrollPane();
        tblStokKritis = new javax.swing.JTable();
        lblStokKritisTitle = new javax.swing.JLabel();
        scrollTerlaris = new javax.swing.JScrollPane();
        tblTerlaris = new javax.swing.JTable();
        cardTransaksi = new javax.swing.JPanel();
        lblTotalTransaksi = new javax.swing.JLabel();
        lblTransaksiTitle = new javax.swing.JLabel();
        lblTransaksiTitle2 = new ui.AdminDashboard.OutlinedLabel("0") ;
        jSeparator3 = new javax.swing.JSeparator();
        cardBarangTerjual = new javax.swing.JPanel();
        lblBarangTerjual = new javax.swing.JLabel();
        lblTotalTransaksi1 = new javax.swing.JLabel();
        lblTransaksiTitle1 = new javax.swing.JLabel();
        jSeparator4 = new javax.swing.JSeparator();
        cardOmset = new javax.swing.JPanel();
        lblOmsetTitle = new javax.swing.JLabel();
        lblOmsetFix = new javax.swing.JLabel();
        jSeparator2 = new javax.swing.JSeparator();
        panelMasterData = new javax.swing.JPanel();
        tabMasterData = new javax.swing.JTabbedPane();
        jScrollPane1 = new javax.swing.JScrollPane();
        tableKategori = new javax.swing.JTable();
        jScrollPane2 = new javax.swing.JScrollPane();
        tableSupplier = new javax.swing.JTable();
        jScrollPane3 = new javax.swing.JScrollPane();
        tableBarang = new javax.swing.JTable();
        jScrollPane4 = new javax.swing.JScrollPane();
        tablePegawai = new javax.swing.JTable();
        jScrollPane5 = new javax.swing.JScrollPane();
        tablePembeli = new javax.swing.JTable();
        jScrollPane8 = new javax.swing.JScrollPane();
        tableJenisPembayaran = new javax.swing.JTable();
        panelMasterActions = new javax.swing.JPanel();
        btnTambah = new javax.swing.JButton();
        btnUbah = new javax.swing.JButton();
        btnHapus = new javax.swing.JButton();
        btnClear = new javax.swing.JButton();
        btnUpload = new javax.swing.JButton();
        btnCetak = new javax.swing.JButton();
        panelRiwayatPenjualan = new javax.swing.JPanel();
        jTabbedPenjualan = new javax.swing.JTabbedPane();
        scrollRiwayatPenjualan = new javax.swing.JScrollPane();
        tblRiwayatPenjualan = new javax.swing.JTable();
        scrollRestock = new javax.swing.JScrollPane();
        tblRestock = new javax.swing.JTable();
        panelMasterActions1 = new javax.swing.JPanel();
        btnDetail = new javax.swing.JButton();
        btnUbahPenjualan = new javax.swing.JButton();
        btnHapusPenjualan = new javax.swing.JButton();
        btnClearPenjualan = new javax.swing.JButton();
        btnCetakPenjualan = new javax.swing.JButton();
        btnTambahPenjualan = new javax.swing.JButton();
        panelKeuangan = new javax.swing.JPanel();
        tabKeuangan = new javax.swing.JTabbedPane();
        scrollHistoriPembayaran = new javax.swing.JScrollPane();
        tblHistoriPembayaran = new javax.swing.JTable();
        panelMasterActions2 = new javax.swing.JPanel();
        btnDeleteHistori = new javax.swing.JButton();
        btnClearAllHistori = new javax.swing.JButton();
        btnPrintHistori = new javax.swing.JButton();
        menuBarMain = new javax.swing.JMenuBar();
        menuProfile = new javax.swing.JMenu();
        menuItemUbahPassword = new javax.swing.JMenuItem();
        menuItemLogout = new javax.swing.JMenuItem();
        menuAksi = new javax.swing.JMenu();
        menuItemRefresh = new javax.swing.JMenuItem();
        menuItemJadiKasir = new javax.swing.JMenuItem();
        menuItemAbout = new javax.swing.JMenuItem();

        dashboard3.setBackground(new java.awt.Color(51, 0, 102));

        javax.swing.GroupLayout dashboard3Layout = new javax.swing.GroupLayout(dashboard3);
        dashboard3.setLayout(dashboard3Layout);
        dashboard3Layout.setHorizontalGroup(
            dashboard3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 10, Short.MAX_VALUE)
        );
        dashboard3Layout.setVerticalGroup(
            dashboard3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 29, Short.MAX_VALUE)
        );

        lblTitle4.setBackground(new java.awt.Color(0, 0, 0));
        lblTitle4.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblTitle4.setText("Dashboard");

        javax.swing.GroupLayout dashboard2Layout = new javax.swing.GroupLayout(dashboard2);
        dashboard2.setLayout(dashboard2Layout);
        dashboard2Layout.setHorizontalGroup(
            dashboard2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dashboard2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(dashboard3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblTitle4)
                .addContainerGap(153, Short.MAX_VALUE))
        );
        dashboard2Layout.setVerticalGroup(
            dashboard2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(dashboard2Layout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(dashboard2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblTitle4)
                    .addComponent(dashboard3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jMenu1.setText("File");
        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        jMenuItem4.setText("jMenuItem4");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        panelUtama.setBackground(new java.awt.Color(204, 255, 255));
        panelUtama.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        panelSidebar.setBackground(new java.awt.Color(0, 153, 153));
        panelSidebar.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jSeparator1.setBackground(new java.awt.Color(102, 255, 0));
        jSeparator1.setForeground(new java.awt.Color(51, 51, 51));
        panelSidebar.add(jSeparator1, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 60, 300, 10));

        lblTitle2.setBackground(new java.awt.Color(0, 0, 0));
        lblTitle2.setFont(new java.awt.Font("Segoe UI", 1, 24)); // NOI18N
        lblTitle2.setText("Welcome Admin");
        panelSidebar.add(lblTitle2, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 20, -1, -1));

        panelNavDashboard.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelNavDashboardMouseClicked(evt);
            }
        });

        panelIndicatorDashboard.setBackground(new java.awt.Color(51, 0, 102));

        javax.swing.GroupLayout panelIndicatorDashboardLayout = new javax.swing.GroupLayout(panelIndicatorDashboard);
        panelIndicatorDashboard.setLayout(panelIndicatorDashboardLayout);
        panelIndicatorDashboardLayout.setHorizontalGroup(
            panelIndicatorDashboardLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 10, Short.MAX_VALUE)
        );
        panelIndicatorDashboardLayout.setVerticalGroup(
            panelIndicatorDashboardLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 29, Short.MAX_VALUE)
        );

        lblNavDashboard.setBackground(new java.awt.Color(0, 0, 0));
        lblNavDashboard.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblNavDashboard.setText("Dashboard");

        javax.swing.GroupLayout panelNavDashboardLayout = new javax.swing.GroupLayout(panelNavDashboard);
        panelNavDashboard.setLayout(panelNavDashboardLayout);
        panelNavDashboardLayout.setHorizontalGroup(
            panelNavDashboardLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavDashboardLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panelIndicatorDashboard, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblNavDashboard)
                .addContainerGap(153, Short.MAX_VALUE))
        );
        panelNavDashboardLayout.setVerticalGroup(
            panelNavDashboardLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavDashboardLayout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(panelNavDashboardLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(panelIndicatorDashboard, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblNavDashboard))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        panelSidebar.add(panelNavDashboard, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 350, 280, 40));

        panelNavMaster.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelNavMasterMouseClicked(evt);
            }
        });

        panelIndicatorMaster.setBackground(new java.awt.Color(51, 0, 102));

        javax.swing.GroupLayout panelIndicatorMasterLayout = new javax.swing.GroupLayout(panelIndicatorMaster);
        panelIndicatorMaster.setLayout(panelIndicatorMasterLayout);
        panelIndicatorMasterLayout.setHorizontalGroup(
            panelIndicatorMasterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 10, Short.MAX_VALUE)
        );
        panelIndicatorMasterLayout.setVerticalGroup(
            panelIndicatorMasterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 29, Short.MAX_VALUE)
        );

        lblTitle1.setBackground(new java.awt.Color(0, 0, 0));
        lblTitle1.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblTitle1.setText("Master Data");

        javax.swing.GroupLayout panelNavMasterLayout = new javax.swing.GroupLayout(panelNavMaster);
        panelNavMaster.setLayout(panelNavMasterLayout);
        panelNavMasterLayout.setHorizontalGroup(
            panelNavMasterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavMasterLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panelIndicatorMaster, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblTitle1)
                .addContainerGap(142, Short.MAX_VALUE))
        );
        panelNavMasterLayout.setVerticalGroup(
            panelNavMasterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavMasterLayout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(panelNavMasterLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(panelIndicatorMaster, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblTitle1))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        panelSidebar.add(panelNavMaster, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 410, 280, 40));

        panelNavRiwayat.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelNavRiwayatMouseClicked(evt);
            }
        });

        panelIndicatorRiwayat.setBackground(new java.awt.Color(51, 0, 102));

        javax.swing.GroupLayout panelIndicatorRiwayatLayout = new javax.swing.GroupLayout(panelIndicatorRiwayat);
        panelIndicatorRiwayat.setLayout(panelIndicatorRiwayatLayout);
        panelIndicatorRiwayatLayout.setHorizontalGroup(
            panelIndicatorRiwayatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 10, Short.MAX_VALUE)
        );
        panelIndicatorRiwayatLayout.setVerticalGroup(
            panelIndicatorRiwayatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 29, Short.MAX_VALUE)
        );

        lblNavRiwayat.setBackground(new java.awt.Color(0, 0, 0));
        lblNavRiwayat.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblNavRiwayat.setText("Transaksi");

        javax.swing.GroupLayout panelNavRiwayatLayout = new javax.swing.GroupLayout(panelNavRiwayat);
        panelNavRiwayat.setLayout(panelNavRiwayatLayout);
        panelNavRiwayatLayout.setHorizontalGroup(
            panelNavRiwayatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavRiwayatLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panelIndicatorRiwayat, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblNavRiwayat)
                .addContainerGap(166, Short.MAX_VALUE))
        );
        panelNavRiwayatLayout.setVerticalGroup(
            panelNavRiwayatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavRiwayatLayout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(panelNavRiwayatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(panelIndicatorRiwayat, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblNavRiwayat))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        panelSidebar.add(panelNavRiwayat, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 470, 280, 40));

        panelNavKeuangan.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelNavKeuanganMouseClicked(evt);
            }
        });

        panelIndicatorKeuangan.setBackground(new java.awt.Color(51, 0, 102));
        panelIndicatorKeuangan.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelIndicatorKeuanganMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout panelIndicatorKeuanganLayout = new javax.swing.GroupLayout(panelIndicatorKeuangan);
        panelIndicatorKeuangan.setLayout(panelIndicatorKeuanganLayout);
        panelIndicatorKeuanganLayout.setHorizontalGroup(
            panelIndicatorKeuanganLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 10, Short.MAX_VALUE)
        );
        panelIndicatorKeuanganLayout.setVerticalGroup(
            panelIndicatorKeuanganLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 29, Short.MAX_VALUE)
        );

        lblNavKeuangan.setBackground(new java.awt.Color(0, 0, 0));
        lblNavKeuangan.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblNavKeuangan.setText("Riwayat Pembayaran");

        javax.swing.GroupLayout panelNavKeuanganLayout = new javax.swing.GroupLayout(panelNavKeuangan);
        panelNavKeuangan.setLayout(panelNavKeuanganLayout);
        panelNavKeuanganLayout.setHorizontalGroup(
            panelNavKeuanganLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavKeuanganLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panelIndicatorKeuangan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(lblNavKeuangan)
                .addContainerGap(68, Short.MAX_VALUE))
        );
        panelNavKeuanganLayout.setVerticalGroup(
            panelNavKeuanganLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelNavKeuanganLayout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(panelNavKeuanganLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(panelIndicatorKeuangan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblNavKeuangan))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        panelSidebar.add(panelNavKeuangan, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 530, 280, 40));

        btnLogout5.setBackground(new java.awt.Color(255, 0, 0));
        btnLogout5.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnLogout5.setForeground(new java.awt.Color(204, 255, 255));
        btnLogout5.setText("LOG OUT");
        btnLogout5.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(153, 0, 0)));
        btnLogout5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLogout5ActionPerformed(evt);
            }
        });
        panelSidebar.add(btnLogout5, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 700, 280, 40));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/admin.png"))); // NOI18N
        panelSidebar.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 100, 320, 220));

        jLabel9.setIcon(new javax.swing.ImageIcon(getClass().getResource("/bglast.png"))); // NOI18N
        panelSidebar.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 360, 1080));

        panelUtama.add(panelSidebar, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 360, 1170));

        panelAtas.setBackground(new java.awt.Color(0, 0, 102));

        jLabel10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/logooobg.png"))); // NOI18N

        javax.swing.GroupLayout panelAtasLayout = new javax.swing.GroupLayout(panelAtas);
        panelAtas.setLayout(panelAtasLayout);
        panelAtasLayout.setHorizontalGroup(
            panelAtasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelAtasLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel10, javax.swing.GroupLayout.PREFERRED_SIZE, 1582, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        panelAtasLayout.setVerticalGroup(
            panelAtasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jLabel10, javax.swing.GroupLayout.PREFERRED_SIZE, 140, Short.MAX_VALUE)
        );

        panelUtama.add(panelAtas, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 0, 1570, 140));

        panelContent.setBackground(new java.awt.Color(255, 153, 153));
        panelContent.setLayout(new java.awt.CardLayout());

        panelDashboard.setBackground(new java.awt.Color(204, 204, 255));
        panelDashboard.setForeground(new java.awt.Color(255, 0, 0));
        panelDashboard.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblTerlarisTitle.setFont(new java.awt.Font("Tahoma", 1, 23)); // NOI18N
        lblTerlarisTitle.setForeground(new java.awt.Color(0, 0, 102));
        lblTerlarisTitle.setText("BARANG TERLARIS");
        panelDashboard.add(lblTerlarisTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 280, 240, 40));

        tblStokKritis.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tblStokKritis.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tblStokKritis.setForeground(new java.awt.Color(0, 0, 102));
        tblStokKritis.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        scrollStokKritis.setViewportView(tblStokKritis);

        panelDashboard.add(scrollStokKritis, new org.netbeans.lib.awtextra.AbsoluteConstraints(620, 350, 540, 210));

        lblStokKritisTitle.setFont(new java.awt.Font("Tahoma", 1, 23)); // NOI18N
        lblStokKritisTitle.setForeground(new java.awt.Color(0, 0, 102));
        lblStokKritisTitle.setText("BARANG HAMPIR HABIS < 5 :");
        panelDashboard.add(lblStokKritisTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(720, 280, 380, 40));

        tblTerlaris.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tblTerlaris.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tblTerlaris.setForeground(new java.awt.Color(0, 0, 102));
        tblTerlaris.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        scrollTerlaris.setViewportView(tblTerlaris);

        panelDashboard.add(scrollTerlaris, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 350, 520, 210));

        cardTransaksi.setBackground(new java.awt.Color(102, 102, 255));
        cardTransaksi.setForeground(new java.awt.Color(153, 51, 255));
        cardTransaksi.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblTotalTransaksi.setFont(new java.awt.Font("Tahoma", 1, 55)); // NOI18N
        lblTotalTransaksi.setForeground(new java.awt.Color(242, 242, 242));
        lblTotalTransaksi.setText("0");
        cardTransaksi.add(lblTotalTransaksi, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 70, 50, 70));

        lblTransaksiTitle.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        lblTransaksiTitle.setForeground(new java.awt.Color(242, 242, 242));
        lblTransaksiTitle.setText("INI");
        cardTransaksi.add(lblTransaksiTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 20, 40, 50));

        lblTransaksiTitle2.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        lblTransaksiTitle2.setForeground(new java.awt.Color(242, 242, 242));
        lblTransaksiTitle2.setText("TOTAL TRANSAKSI HARI ");
        cardTransaksi.add(lblTransaksiTitle2, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 10, 240, 20));

        jSeparator3.setForeground(new java.awt.Color(0, 0, 102));
        cardTransaksi.add(jSeparator3, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 60, 320, 10));

        panelDashboard.add(cardTransaksi, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 30, 320, 190));

        cardBarangTerjual.setBackground(new java.awt.Color(102, 102, 255));
        cardBarangTerjual.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblBarangTerjual.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        lblBarangTerjual.setForeground(new java.awt.Color(0, 0, 102));
        lblBarangTerjual.setText("BARANG TERJUAL HARI ");
        cardBarangTerjual.add(lblBarangTerjual, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 0, 290, 40));

        lblTotalTransaksi1.setFont(new java.awt.Font("Tahoma", 1, 55)); // NOI18N
        lblTotalTransaksi1.setForeground(new java.awt.Color(0, 0, 102));
        lblTotalTransaksi1.setText("0");
        lblTotalTransaksi1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        lblTotalTransaksi1.setMaximumSize(new java.awt.Dimension(250, 250));
        lblTotalTransaksi1.setMinimumSize(new java.awt.Dimension(250, 250));
        lblTotalTransaksi1.setPreferredSize(new java.awt.Dimension(250, 250));
        cardBarangTerjual.add(lblTotalTransaksi1, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 50, 210, 110));

        lblTransaksiTitle1.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        lblTransaksiTitle1.setForeground(new java.awt.Color(242, 242, 242));
        lblTransaksiTitle1.setText("INI");
        cardBarangTerjual.add(lblTransaksiTitle1, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 30, 150, 30));

        jSeparator4.setForeground(new java.awt.Color(0, 0, 102));
        cardBarangTerjual.add(jSeparator4, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 60, 320, 10));

        panelDashboard.add(cardBarangTerjual, new org.netbeans.lib.awtextra.AbsoluteConstraints(410, 30, 320, 190));

        cardOmset.setBackground(new java.awt.Color(102, 102, 255));
        cardOmset.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblOmsetTitle.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        lblOmsetTitle.setForeground(new java.awt.Color(0, 0, 102));
        lblOmsetTitle.setText("OMSET HARI INI");
        cardOmset.add(lblOmsetTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 0, 260, 50));

        lblOmsetFix.setFont(new java.awt.Font("Segoe UI", 1, 55)); // NOI18N
        lblOmsetFix.setForeground(new java.awt.Color(0, 0, 102));
        lblOmsetFix.setText("0");
        cardOmset.add(lblOmsetFix, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 70, -1, -1));

        jSeparator2.setForeground(new java.awt.Color(0, 0, 102));
        cardOmset.add(jSeparator2, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 60, 390, 10));

        panelDashboard.add(cardOmset, new org.netbeans.lib.awtextra.AbsoluteConstraints(770, 30, 390, 190));

        panelContent.add(panelDashboard, "card5");

        panelMasterData.setBackground(new java.awt.Color(204, 204, 255));
        panelMasterData.setForeground(new java.awt.Color(255, 255, 0));
        panelMasterData.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tabMasterData.setBackground(new java.awt.Color(102, 102, 255));
        tabMasterData.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));

        tableKategori.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tableKategori.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tableKategori.setForeground(new java.awt.Color(0, 0, 102));
        tableKategori.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null},
                {null, null},
                {null, null},
                {null, null}
            },
            new String [] {
                "ID Kategori", "Nama Kategori"
            }
        ));
        jScrollPane1.setViewportView(tableKategori);

        tabMasterData.addTab("Kategori", jScrollPane1);

        tableSupplier.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tableSupplier.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tableSupplier.setForeground(new java.awt.Color(0, 0, 102));
        tableSupplier.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "ID Supplier", "Nama Supplier", "Kontak", "Alamat"
            }
        ));
        jScrollPane2.setViewportView(tableSupplier);

        tabMasterData.addTab("Supplier", jScrollPane2);

        tableBarang.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tableBarang.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tableBarang.setForeground(new java.awt.Color(0, 0, 102));
        tableBarang.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "ID Barang", "Nama Barang", "Kategori", "Harga", "Stok"
            }
        ));
        jScrollPane3.setViewportView(tableBarang);

        tabMasterData.addTab("Barang", jScrollPane3);

        tablePegawai.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tablePegawai.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tablePegawai.setForeground(new java.awt.Color(0, 0, 102));
        tablePegawai.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "ID Pegawai", "Nama Pegawai", "Jabatan", "Username", "Password"
            }
        ));
        jScrollPane4.setViewportView(tablePegawai);

        tabMasterData.addTab("Pegawai", jScrollPane4);

        tablePembeli.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tablePembeli.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tablePembeli.setForeground(new java.awt.Color(0, 0, 102));
        tablePembeli.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "ID Pembeli", "Nama Pembeli", "No Telepon", "Alamat"
            }
        ));
        jScrollPane5.setViewportView(tablePembeli);

        tabMasterData.addTab("Pembeli", jScrollPane5);

        tableJenisPembayaran.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tableJenisPembayaran.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tableJenisPembayaran.setForeground(new java.awt.Color(0, 0, 102));
        tableJenisPembayaran.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "ID Jenis", "Nama Jenis", "Keterangan"
            }
        ));
        jScrollPane8.setViewportView(tableJenisPembayaran);

        tabMasterData.addTab("Metode Pembayaran", jScrollPane8);

        panelMasterData.add(tabMasterData, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 0, 830, 380));

        panelMasterActions.setBackground(new java.awt.Color(204, 204, 255));
        panelMasterActions.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnTambah.setBackground(new java.awt.Color(0, 153, 51));
        btnTambah.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnTambah.setForeground(new java.awt.Color(204, 255, 255));
        btnTambah.setText("TAMBAH");
        btnTambah.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(51, 255, 0)));
        btnTambah.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTambahActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnTambah, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 30, 120, 40));

        btnUbah.setBackground(new java.awt.Color(0, 102, 153));
        btnUbah.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnUbah.setForeground(new java.awt.Color(204, 255, 255));
        btnUbah.setText("EDIT");
        btnUbah.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 204, 204)));
        btnUbah.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUbahActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnUbah, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 30, 120, 40));

        btnHapus.setBackground(new java.awt.Color(204, 0, 0));
        btnHapus.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnHapus.setForeground(new java.awt.Color(204, 255, 255));
        btnHapus.setText("HAPUS");
        btnHapus.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 51, 102)));
        btnHapus.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHapusActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnHapus, new org.netbeans.lib.awtextra.AbsoluteConstraints(510, 30, 120, 40));

        btnClear.setBackground(new java.awt.Color(153, 102, 0));
        btnClear.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnClear.setForeground(new java.awt.Color(204, 255, 255));
        btnClear.setText("CLEAR ALL");
        btnClear.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 204, 0)));
        btnClear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnClearActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnClear, new org.netbeans.lib.awtextra.AbsoluteConstraints(710, 30, 120, 40));

        btnUpload.setBackground(new java.awt.Color(0, 0, 204));
        btnUpload.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnUpload.setForeground(new java.awt.Color(204, 255, 255));
        btnUpload.setText("UPLOAD");
        btnUpload.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 153, 204)));
        btnUpload.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUploadActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnUpload, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 130, 310, 40));

        btnCetak.setBackground(new java.awt.Color(102, 0, 102));
        btnCetak.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnCetak.setForeground(new java.awt.Color(204, 255, 255));
        btnCetak.setText("PRINT");
        btnCetak.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 0, 204)));
        btnCetak.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCetakActionPerformed(evt);
            }
        });
        panelMasterActions.add(btnCetak, new org.netbeans.lib.awtextra.AbsoluteConstraints(510, 130, 320, 40));

        panelMasterData.add(panelMasterActions, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 410, 870, 310));

        panelContent.add(panelMasterData, "card3");

        panelRiwayatPenjualan.setBackground(new java.awt.Color(204, 204, 255));
        panelRiwayatPenjualan.setForeground(new java.awt.Color(255, 255, 0));
        panelRiwayatPenjualan.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelRiwayatPenjualanMouseClicked(evt);
            }
        });
        panelRiwayatPenjualan.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jTabbedPenjualan.setBackground(new java.awt.Color(102, 102, 255));
        jTabbedPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        jTabbedPenjualan.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                JtabbedPenjualan(evt);
            }
        });

        tblRiwayatPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tblRiwayatPenjualan.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tblRiwayatPenjualan.setForeground(new java.awt.Color(0, 0, 102));
        tblRiwayatPenjualan.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null}
            },
            new String [] {
                "ID Penjualan", "Nama Kasir", "Nama Pembeli", "Metode Pembayaran", "Total", "Bayar", "Kembalian", "Tanggal"
            }
        ));
        scrollRiwayatPenjualan.setViewportView(tblRiwayatPenjualan);

        jTabbedPenjualan.addTab("Riwayat Penjualan", scrollRiwayatPenjualan);

        tblRestock.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tblRestock.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tblRestock.setForeground(new java.awt.Color(0, 0, 102));
        tblRestock.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "ID Restok", "Nama Admin", "Supplier", "Total Item", "Tanggal"
            }
        ));
        scrollRestock.setViewportView(tblRestock);

        jTabbedPenjualan.addTab("Restock", scrollRestock);

        panelRiwayatPenjualan.add(jTabbedPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 0, 930, 380));

        panelMasterActions1.setBackground(new java.awt.Color(204, 204, 255));
        panelMasterActions1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnDetail.setBackground(new java.awt.Color(0, 0, 255));
        btnDetail.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnDetail.setForeground(new java.awt.Color(204, 255, 255));
        btnDetail.setText("LIHAT DETAIL");
        btnDetail.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 204, 255)));
        btnDetail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDetailActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnDetail, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 120, 310, 40));

        btnUbahPenjualan.setBackground(new java.awt.Color(0, 102, 153));
        btnUbahPenjualan.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnUbahPenjualan.setForeground(new java.awt.Color(204, 255, 255));
        btnUbahPenjualan.setText("EDIT");
        btnUbahPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 204, 204)));
        btnUbahPenjualan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUbahPenjualanActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnUbahPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 30, 120, 40));

        btnHapusPenjualan.setBackground(new java.awt.Color(204, 0, 0));
        btnHapusPenjualan.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnHapusPenjualan.setForeground(new java.awt.Color(204, 255, 255));
        btnHapusPenjualan.setText("HAPUS");
        btnHapusPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 51, 102)));
        btnHapusPenjualan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHapusPenjualanActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnHapusPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(470, 30, 120, 40));

        btnClearPenjualan.setBackground(new java.awt.Color(153, 102, 0));
        btnClearPenjualan.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnClearPenjualan.setForeground(new java.awt.Color(204, 255, 255));
        btnClearPenjualan.setText("CLEAR ALL");
        btnClearPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 204, 0)));
        btnClearPenjualan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnClearPenjualanActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnClearPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(640, 30, 120, 40));

        btnCetakPenjualan.setBackground(new java.awt.Color(102, 0, 102));
        btnCetakPenjualan.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnCetakPenjualan.setForeground(new java.awt.Color(204, 255, 255));
        btnCetakPenjualan.setText("PRINT");
        btnCetakPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 0, 204)));
        btnCetakPenjualan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCetakPenjualanActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnCetakPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(470, 120, 290, 40));

        btnTambahPenjualan.setBackground(new java.awt.Color(0, 153, 51));
        btnTambahPenjualan.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnTambahPenjualan.setForeground(new java.awt.Color(204, 255, 255));
        btnTambahPenjualan.setText("TAMBAH");
        btnTambahPenjualan.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(51, 255, 0)));
        btnTambahPenjualan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTambahPenjualanActionPerformed(evt);
            }
        });
        panelMasterActions1.add(btnTambahPenjualan, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 30, 120, 40));

        panelRiwayatPenjualan.add(panelMasterActions1, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 380, 860, 310));

        panelContent.add(panelRiwayatPenjualan, "card5");

        panelKeuangan.setBackground(new java.awt.Color(204, 204, 255));
        panelKeuangan.setForeground(new java.awt.Color(255, 255, 0));
        panelKeuangan.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tabKeuangan.setBackground(new java.awt.Color(102, 102, 255));
        tabKeuangan.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(51, 0, 153)));

        tblHistoriPembayaran.setBorder(javax.swing.BorderFactory.createMatteBorder(2, 2, 2, 2, new java.awt.Color(0, 0, 102)));
        tblHistoriPembayaran.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tblHistoriPembayaran.setForeground(new java.awt.Color(0, 0, 102));
        tblHistoriPembayaran.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null}
            },
            new String [] {
                "ID Pembayaran", "ID Penjualan", "Nama Pembeli", "Metode Pembayaran", "Total", "Bayar", "Kembalian", "Tanggal"
            }
        ));
        scrollHistoriPembayaran.setViewportView(tblHistoriPembayaran);

        tabKeuangan.addTab("Riwayat Pembayaran", scrollHistoriPembayaran);

        panelKeuangan.add(tabKeuangan, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 0, 1010, 420));

        panelMasterActions2.setBackground(new java.awt.Color(204, 204, 255));
        panelMasterActions2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnDeleteHistori.setBackground(new java.awt.Color(204, 0, 0));
        btnDeleteHistori.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnDeleteHistori.setForeground(new java.awt.Color(204, 255, 255));
        btnDeleteHistori.setText("DELETE");
        btnDeleteHistori.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 51, 102)));
        btnDeleteHistori.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDeleteHistoriActionPerformed(evt);
            }
        });
        panelMasterActions2.add(btnDeleteHistori, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 0, 150, 50));

        btnClearAllHistori.setBackground(new java.awt.Color(153, 102, 0));
        btnClearAllHistori.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnClearAllHistori.setForeground(new java.awt.Color(204, 255, 255));
        btnClearAllHistori.setText("CLEAR ALL");
        btnClearAllHistori.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 204, 0)));
        btnClearAllHistori.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnClearAllHistoriActionPerformed(evt);
            }
        });
        panelMasterActions2.add(btnClearAllHistori, new org.netbeans.lib.awtextra.AbsoluteConstraints(650, 0, 150, 50));

        btnPrintHistori.setBackground(new java.awt.Color(102, 0, 102));
        btnPrintHistori.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        btnPrintHistori.setForeground(new java.awt.Color(204, 255, 255));
        btnPrintHistori.setText("PRINT");
        btnPrintHistori.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(255, 0, 204)));
        btnPrintHistori.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPrintHistoriActionPerformed(evt);
            }
        });
        panelMasterActions2.add(btnPrintHistori, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 70, 470, 50));

        panelKeuangan.add(panelMasterActions2, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 480, 1100, 310));

        panelContent.add(panelKeuangan, "card4");

        panelUtama.add(panelContent, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 140, 1560, 950));

        menuBarMain.setBorder(new javax.swing.border.MatteBorder(null));

        menuProfile.setBorder(null);
        menuProfile.setText(" Profile");
        menuProfile.setFont(new java.awt.Font("Segoe UI", 1, 15)); // NOI18N

        menuItemUbahPassword.setText("Ubah Password");
        menuItemUbahPassword.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuItemUbahPasswordActionPerformed(evt);
            }
        });
        menuProfile.add(menuItemUbahPassword);

        menuItemLogout.setText("Log Out");
        menuItemLogout.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuItemLogoutActionPerformed(evt);
            }
        });
        menuProfile.add(menuItemLogout);

        menuBarMain.add(menuProfile);

        menuAksi.setBorder(null);
        menuAksi.setText("  Menu");
        menuAksi.setFont(new java.awt.Font("Segoe UI", 1, 15)); // NOI18N

        menuItemRefresh.setText("Refresh ");
        menuItemRefresh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuItemRefreshActionPerformed(evt);
            }
        });
        menuAksi.add(menuItemRefresh);

        menuItemJadiKasir.setText("Mode Kasir");
        menuItemJadiKasir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuItemJadiKasirActionPerformed(evt);
            }
        });
        menuAksi.add(menuItemJadiKasir);

        menuItemAbout.setText("Tentang Aplikasi");
        menuItemAbout.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuItemAboutActionPerformed(evt);
            }
        });
        menuAksi.add(menuItemAbout);

        menuBarMain.add(menuAksi);

        setJMenuBar(menuBarMain);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(panelUtama, javax.swing.GroupLayout.PREFERRED_SIZE, 1920, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 12, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(panelUtama, javax.swing.GroupLayout.PREFERRED_SIZE, 1080, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnLogout5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLogout5ActionPerformed
        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Yakin ingin logout?",
                "Konfirmasi Logout",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm == JOptionPane.YES_OPTION) {
            new LoginFrame().setVisible(true);
            this.dispose();
    }     }//GEN-LAST:event_btnLogout5ActionPerformed

    private void panelNavDashboardMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelNavDashboardMouseClicked
        showPanel("dashboard");
        setActiveMenu(panelNavDashboard);
        setActiveIndicator(panelIndicatorDashboard);
        // TODO add your handling code here:
    }//GEN-LAST:event_panelNavDashboardMouseClicked

    private void panelNavMasterMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelNavMasterMouseClicked
        showPanel("master");
        setActiveMenu(panelNavMaster);
        setActiveIndicator(panelIndicatorMaster);
    }//GEN-LAST:event_panelNavMasterMouseClicked

    private void panelNavRiwayatMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelNavRiwayatMouseClicked
        showPanel("riwayat");
        setActiveMenu(panelNavRiwayat);
        setActiveIndicator(panelIndicatorRiwayat);
    }//GEN-LAST:event_panelNavRiwayatMouseClicked

    private void panelNavKeuanganMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelNavKeuanganMouseClicked
        showPanel("keuangan");
        setActiveMenu(panelNavKeuangan);
        setActiveIndicator(panelIndicatorKeuangan);

        // PENTING BANGET
        loadHistoriPembayaran();
    }//GEN-LAST:event_panelNavKeuanganMouseClicked

    private void panelIndicatorKeuanganMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelIndicatorKeuanganMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_panelIndicatorKeuanganMouseClicked

    private void btnTambahActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTambahActionPerformed
        int tab = tabMasterData.getSelectedIndex();

        switch (tab) {

            // ===================== TAB KATEGORI =====================
            case 0:
                DialogKategori dk = new DialogKategori(this, true);
                dk.setLocationRelativeTo(this);
                dk.setVisible(true);

                Kategori resK = dk.getResult();
                if (resK != null) {
                    KategoriService service = new KategoriService();
                    if (service.insert(resK)) {
                        loadTableKategori();
                        JOptionPane.showMessageDialog(this, "Kategori berhasil ditambahkan!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan kategori!");
                    }
                }
                break;

            // ===================== TAB SUPPLIER =====================
            case 1:
                DialogSupplier ds = new DialogSupplier(this, true);
                ds.setLocationRelativeTo(this);
                ds.setVisible(true);

                Supplier resS = ds.getResult();
                if (resS != null) {
                    SupplierService service = new SupplierService();
                    if (service.insert(resS)) {
                        loadTableSupplier();
                        JOptionPane.showMessageDialog(this, "Supplier berhasil ditambahkan!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan supplier!");
                    }
                }
                break;

            // ===================== TAB BARANG =====================
            case 2:
                DialogBarang dialog = new DialogBarang(this, true);

                // load kategori
                KategoriService ks = new KategoriService();
                List<Kategori> kategoriList = ks.getAll();

                dialog.setInsertMode(kategoriList);
                dialog.setLocationRelativeTo(this);
                dialog.setVisible(true);

                Barang hasil = dialog.getResult();
                if (hasil != null) {
                    BarangService bs = new BarangService();
                    if (bs.insert(hasil)) {
                        JOptionPane.showMessageDialog(this, "Barang berhasil ditambahkan!");
                        loadTableBarang();
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan barang!");
                    }
                }
                break;

            // ===================== TAB PEGAWAI =====================
            case 3:
                DialogPegawai dp = new DialogPegawai(this, true);
                dp.setInsertMode(); // WAJIB
                dp.setLocationRelativeTo(this);
                dp.setVisible(true);

                Pegawai resP = dp.getPegawai();
                if (resP != null) {
                    PegawaiService service = new PegawaiService();
                    if (service.insert(resP)) {
                        loadTablePegawai();
                        JOptionPane.showMessageDialog(this, "Pegawai berhasil ditambahkan!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan pegawai!");
                    }
                }
                break;

            // ===================== TAB PEMBELI =====================
            case 4:
                DialogPembeli dpm = new DialogPembeli(this, true);

                PembeliService ps = new PembeliService();
                String newId = ps.generateIdPembeli();
                dpm.setInsertMode(newId);

                dpm.setLocationRelativeTo(this);
                dpm.setVisible(true);

                Pembeli resPm = dpm.getResult();

                if (resPm != null) {

                    if (ps.existsById(resPm.getIdPembeli())) {
                        JOptionPane.showMessageDialog(this,
                                "ID Pembeli bentrok! Silakan coba lagi.");
                        return;
                    }

                    if (ps.insert(resPm)) {
                        JOptionPane.showMessageDialog(this, "Pembeli berhasil ditambahkan!");
                        loadTablePembeli();
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan pembeli!");
                    }
                }

                break;

            case 5:
                DialogJenisPembayaran d1 = new DialogJenisPembayaran(this, true);
                d1.setLocationRelativeTo(this);
                d1.setVisible(true);

                JenisPembayaran hasilJP = d1.getResult();
                if (hasilJP != null) {
                    JenisPembayaranService serviceJP = new JenisPembayaranService();
                    if (serviceJP.insert(hasilJP)) {
                        loadTableJenisPembayaran();
                        JOptionPane.showMessageDialog(this, "Metode pembayaran berhasil ditambahkan!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menambahkan metode pembayaran!");
                    }
                }
                break;

        }

        // TODO add your handling code here:
    }//GEN-LAST:event_btnTambahActionPerformed

    private void btnUbahActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUbahActionPerformed
        int tab = tabMasterData.getSelectedIndex();

        switch (tab) {

            // ===================== TAB KATEGORI =====================
            case 0:
                int row = tableKategori.getSelectedRow();
                if (row < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih kategori dulu!");
                    return;
                }

                Kategori lama = new Kategori();
                lama.setIdKategori(tableKategori.getValueAt(row, 0).toString());
                lama.setNamaKategori(tableKategori.getValueAt(row, 1).toString());

                DialogKategori dk = new DialogKategori(this, true);
                dk.setUpdateMode(lama);
                dk.setLocationRelativeTo(this);
                dk.setVisible(true);

                Kategori hasil = dk.getResult();
                if (hasil != null) {
                    KategoriService service = new KategoriService();
                    if (service.update(hasil)) {
                        loadTableKategori();
                        JOptionPane.showMessageDialog(this, "Kategori berhasil diupdate!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update kategori!");
                    }
                }
                break;

            // ===================== TAB SUPPLIER =====================
            case 1:
                int rowS = tableSupplier.getSelectedRow();
                if (rowS < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih supplier dulu!");
                    return;
                }

                Supplier lamaS = new Supplier(
                        tableSupplier.getValueAt(rowS, 0).toString(),
                        tableSupplier.getValueAt(rowS, 1).toString(),
                        tableSupplier.getValueAt(rowS, 2).toString(),
                        tableSupplier.getValueAt(rowS, 3).toString()
                );

                DialogSupplier dsU = new DialogSupplier(this, true);
                dsU.setUpdateMode(lamaS);
                dsU.setLocationRelativeTo(this);
                dsU.setVisible(true);

                Supplier hasilS = dsU.getResult();
                if (hasilS != null) {
                    SupplierService service = new SupplierService();
                    if (service.update(hasilS)) {
                        loadTableSupplier();
                        JOptionPane.showMessageDialog(this, "Supplier berhasil diupdate!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update supplier!");
                    }
                }
                break;

            // ===================== TAB BARANG =====================
            case 2:
                int rowB = tableBarang.getSelectedRow();
                if (rowB < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih barang dulu!");
                    return;
                }

                Barang lamaB = new Barang();
                lamaB.setIdBarang(tableBarang.getValueAt(rowB, 0).toString());
                lamaB.setNamaBarang(tableBarang.getValueAt(rowB, 1).toString());
                lamaB.setNamaKategori(tableBarang.getValueAt(rowB, 2).toString());
                lamaB.setHarga(Double.parseDouble(tableBarang.getValueAt(rowB, 3).toString()));
                lamaB.setStock(Integer.parseInt(tableBarang.getValueAt(rowB, 4).toString()));

                KategoriService ks2 = new KategoriService();
                List<Kategori> kategoriList2 = ks2.getAll();

                DialogBarang dialogU = new DialogBarang(this, true);
                dialogU.setUpdateMode(lamaB, kategoriList2);
                dialogU.setLocationRelativeTo(this);
                dialogU.setVisible(true);

                Barang hasilB = dialogU.getResult();
                if (hasilB != null) {
                    BarangService bs2 = new BarangService();
                    if (bs2.update(hasilB)) {
                        loadTableBarang();
                        JOptionPane.showMessageDialog(this, "Barang berhasil diupdate!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update barang!");
                    }
                }
                break;

            // ===================== TAB PEGAWAI =====================
            case 3:
                int rowP = tablePegawai.getSelectedRow();
                if (rowP < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih pegawai dulu!");
                    return;
                }

                Pegawai lamaP = new Pegawai();
                lamaP.setId(tablePegawai.getValueAt(rowP, 0).toString());
                lamaP.setNama(tablePegawai.getValueAt(rowP, 1).toString());
                lamaP.setJabatan(tablePegawai.getValueAt(rowP, 2).toString());
                lamaP.setUsername(tablePegawai.getValueAt(rowP, 3).toString());
                lamaP.setPassword(tablePegawai.getValueAt(rowP, 4).toString());

                DialogPegawai dpU = new DialogPegawai(this, true);
                dpU.setUpdateMode(lamaP);
                dpU.setLocationRelativeTo(this);
                dpU.setVisible(true);

                Pegawai hasilP = dpU.getPegawai();
                if (hasilP != null) {
                    PegawaiService psU = new PegawaiService();
                    if (psU.update(hasilP)) {
                        loadTablePegawai();
                        JOptionPane.showMessageDialog(this, "Pegawai berhasil diupdate!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update pegawai!");
                    }
                }
                break;

            // ===================== TAB PEMBELI =====================
            case 4:
                int selectedRow = tablePembeli.getSelectedRow();
                if (selectedRow == -1) {
                    JOptionPane.showMessageDialog(this, "Pilih pembeli yang ingin di-update!");
                    return;
                }

                String idPembeli = tablePembeli.getValueAt(selectedRow, 0).toString();

                PembeliService psu = new PembeliService();
                Pembeli pembeliTerpilih = psu.getById(idPembeli);

                if (pembeliTerpilih == null) {
                    JOptionPane.showMessageDialog(this, "Data pembeli tidak ditemukan!");
                    return;
                }

                DialogPembeli dlgPembeli = new DialogPembeli(this, true);
                dlgPembeli.setUpdateMode(pembeliTerpilih);
                dlgPembeli.setLocationRelativeTo(this);
                dlgPembeli.setVisible(true);

                Pembeli updated = dlgPembeli.getResult();

                if (updated != null) {
                    if (psu.update(updated)) {
                        loadTablePembeli();
                        JOptionPane.showMessageDialog(this, "Pembeli berhasil di-update!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update pembeli!");
                    }
                }
                break;

            case 5:
                int rowJP = tableJenisPembayaran.getSelectedRow();
                if (rowJP < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih metode pembayaran dahulu!");
                    return;
                }

                String idJP = tableJenisPembayaran.getValueAt(rowJP, 0).toString();
                JenisPembayaranService jps = new JenisPembayaranService();
                JenisPembayaran jp = jps.getById(idJP);

                if (jp == null) {
                    JOptionPane.showMessageDialog(this, "Data metode pembayaran tidak ditemukan!");
                    return;
                }

                // OPEN DIALOG UPDATE
                DialogJenisPembayaran dlgJP = new DialogJenisPembayaran(this, true);
                dlgJP.setUpdateMode(jp);
                dlgJP.setLocationRelativeTo(this);
                dlgJP.setVisible(true);

                JenisPembayaran updatedJP = dlgJP.getResult();

                if (updatedJP != null) {
                    if (jps.update(updatedJP)) {
                        loadTableJenisPembayaran();
                        JOptionPane.showMessageDialog(this, "Metode pembayaran berhasil diupdate!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal update metode pembayaran!");
                    }
                }
                break;

        }
    }//GEN-LAST:event_btnUbahActionPerformed

    private void btnHapusActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHapusActionPerformed
        int tab = tabMasterData.getSelectedIndex();

        switch (tab) {

            // ===================== TAB KATEGORI =====================
            case 0:
                int rowK = tableKategori.getSelectedRow();
                if (rowK < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih kategori dulu!");
                    return;
                }

                String idK = tableKategori.getValueAt(rowK, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus kategori?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    KategoriService ks = new KategoriService();
                    if (ks.delete(idK)) {

                        // ========== BARIS FIX YANG WAJIB ========== 
                        loadTableBarang();  // karena barang ikut kehapus (cascade)
                        // ==========================================

                        loadTableKategori();
                        JOptionPane.showMessageDialog(this, "Kategori berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus kategori!");
                    }
                }
                break;

            // ===================== TAB SUPPLIER =====================
            case 1:
                int rowS = tableSupplier.getSelectedRow();
                if (rowS < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih supplier dulu!");
                    return;
                }

                String idS = tableSupplier.getValueAt(rowS, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus supplier?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    SupplierService ss = new SupplierService();
                    if (ss.delete(idS)) {
                        loadTableSupplier();
                        JOptionPane.showMessageDialog(this, "Supplier berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus supplier!");
                    }
                }
                break;

            // ===================== TAB BARANG =====================
            case 2:
                int rowB = tableBarang.getSelectedRow();
                if (rowB < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih barang dulu!");
                    return;
                }

                String idB = tableBarang.getValueAt(rowB, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus barang?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    BarangService bs = new BarangService();
                    if (bs.delete(idB)) {
                        loadTableBarang();
                        JOptionPane.showMessageDialog(this, "Barang berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus barang!");
                    }
                }
                break;

            // ===================== TAB PEGAWAI =====================
            case 3:
                int rowP = tablePegawai.getSelectedRow();
                if (rowP < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih pegawai dulu!");
                    return;
                }

                String idP = tablePegawai.getValueAt(rowP, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus pegawai?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    PegawaiService ps = new PegawaiService();
                    if (ps.delete(idP)) {
                        loadTablePegawai();
                        JOptionPane.showMessageDialog(this, "Pegawai berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus pegawai!");
                    }
                }
                break;

            // ===================== TAB PEMBELI =====================
            case 4:
                int rowPm = tablePembeli.getSelectedRow();
                if (rowPm < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih pembeli dulu!");
                    return;
                }

                String idPm = tablePembeli.getValueAt(rowPm, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus pembeli?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    PembeliService pms = new PembeliService();
                    if (pms.delete(idPm)) {
                        loadTablePembeli();
                        JOptionPane.showMessageDialog(this, "Pembeli berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus pembeli!");
                    }
                }
                break;

            case 5:
                int rowDel = tableJenisPembayaran.getSelectedRow();
                if (rowDel < 0) {
                    JOptionPane.showMessageDialog(this, "Pilih metode pembayaran yang ingin dihapus!");
                    return;
                }

                String idDel = tableJenisPembayaran.getValueAt(rowDel, 0).toString();

                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus metode pembayaran?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    JenisPembayaranService jps = new JenisPembayaranService();

                    if (jps.delete(idDel)) {
                        loadTableJenisPembayaran();
                        JOptionPane.showMessageDialog(this, "Metode pembayaran berhasil dihapus!");
                    }
                }
                break;

        }        // TODO add your handling code here:
    }//GEN-LAST:event_btnHapusActionPerformed

    private void btnClearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnClearActionPerformed
        int tab = tabMasterData.getSelectedIndex();

        if (JOptionPane.showConfirmDialog(this,
                "Hapus SEMUA data di tab ini?",
                "Konfirmasi",
                JOptionPane.YES_NO_OPTION) != JOptionPane.YES_OPTION) {
            return;
        }

        switch (tab) {

            case 0: // TAB KATEGORI
                if (JOptionPane.showConfirmDialog(this,
                        "Yakin hapus SEMUA kategori dan semua barang yang terkait?",
                        "Konfirmasi",
                        JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {

                    KategoriService ks = new KategoriService();
                    if (ks.deleteAll()) {
                        loadTableKategori();
                        loadTableBarang(); // karena barang ikut kehapus
                        JOptionPane.showMessageDialog(this, "Semua kategori + barang terkait berhasil dihapus!");
                    } else {
                        JOptionPane.showMessageDialog(this, "Gagal menghapus semua kategori!");
                    }
                }
                break;

            case 1: // SUPPLIER
                if (new SupplierService().deleteAll()) {
                    loadTableSupplier();
                    JOptionPane.showMessageDialog(this, "Semua supplier telah dihapus!");
                }
                break;

            case 2: // BARANG
                if (new BarangService().deleteAll()) {
                    loadTableBarang();
                    JOptionPane.showMessageDialog(this, "Semua barang telah dihapus!");
                }
                break;

            case 3: // PEGAWAI
                if (new PegawaiService().deleteAll()) {
                    loadTablePegawai();
                    JOptionPane.showMessageDialog(this, "Semua pegawai telah dihapus!");
                }
                break;

            case 4: // PEMBELI
                if (new PembeliService().deleteAll()) {
                    loadTablePembeli();
                    JOptionPane.showMessageDialog(this, "Semua pembeli telah dihapus!");
                }
                break;

            case 5:
                JenisPembayaranService jpClear = new JenisPembayaranService();

                if (jpClear.deleteAll()) {
                    loadTableJenisPembayaran();   // <<< INI YANG WAJIB
                    JOptionPane.showMessageDialog(this, "Semua metode pembayaran telah dihapus!");
                } else {
                    JOptionPane.showMessageDialog(this, "Gagal menghapus semua metode pembayaran!");
                }
                break;

        }

    }//GEN-LAST:event_btnClearActionPerformed

    private void btnCetakActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCetakActionPerformed
         int index = tabMasterData.getSelectedIndex();

    switch (index) {

        case 0: // KATEGORI
            ReportUtil.showReport("src/Report/ReportKategori.jrxml", null);
            break;

        case 1: // SUPPLIER
            ReportUtil.showReport("src/Report/ReportSupplier.jrxml", null);
            break;

        case 2: // BARANG
            ReportUtil.showReport("src/Report/ReportBarang.jrxml", null);
            break;

        case 3: // PEGAWAI
            ReportUtil.showReport("src/Report/ReportPegawai.jrxml", null);
            break;

        case 4: // PEMBELI
            ReportUtil.showReport("src/Report/ReportPembeli.jrxml", null);
            break;

        case 5: // METODE PEMBAYARAN
            ReportUtil.showReport("src/Report/ReportJenisPembayaran.jrxml", null);
            break;
    }
    }//GEN-LAST:event_btnCetakActionPerformed

    private void btnUploadActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUploadActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnUploadActionPerformed

    private void btnDetailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDetailActionPerformed
         int idx = jTabbedPenjualan.getSelectedIndex();

        // ================================
        // TAB 0 = RIWAYAT PENJUALAN
        // ================================
        if (idx == 0) {
            int row = tblRiwayatPenjualan.getSelectedRow();
            if (row < 0) {
                JOptionPane.showMessageDialog(this, "Pilih data penjualan dulu!");
                return;
            }

            String idPenjualan = tblRiwayatPenjualan.getValueAt(row, 0).toString();

            DialogDetailPenjualan d = new DialogDetailPenjualan(this, idPenjualan);
            d.setLocationRelativeTo(this);
            d.setVisible(true);
            return;
        }

        // ================================
        // TAB 1 = RIWAYAT RESTOCK
        // ================================
        if (idx == 1) {
            int row = tblRestock.getSelectedRow();
            if (row < 0) {
                JOptionPane.showMessageDialog(this, "Pilih data restock dulu!");
                return;
            }

            String idRestock = tblRestock.getValueAt(row, 0).toString();

            // PAKAI KONSTRUKTOR BARU
            DialogDetailRestock d = new DialogDetailRestock(this, idRestock);
            d.setLocationRelativeTo(this);
            d.setVisible(true);
        }         // TODO add your handling code here:
    }//GEN-LAST:event_btnDetailActionPerformed

    private void btnUbahPenjualanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUbahPenjualanActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnUbahPenjualanActionPerformed

    private void btnHapusPenjualanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHapusPenjualanActionPerformed
        int idx = jTabbedPenjualan.getSelectedIndex();

        // ==========================
        // HAPUS DATA PENJUALAN
        // ==========================
        if (idx == 0) {
            int row = tblRiwayatPenjualan.getSelectedRow();
            if (row < 0) {
                JOptionPane.showMessageDialog(this, "Pilih data penjualan dulu!");
                return;
            }

            String id = tblRiwayatPenjualan.getValueAt(row, 0).toString();

            int confirm = JOptionPane.showConfirmDialog(
                    this,
                    "Yakin hapus penjualan " + id + "?",
                    "Konfirmasi",
                    JOptionPane.YES_NO_OPTION);

            if (confirm == JOptionPane.YES_OPTION) {
                try (Connection c = DBConnection.getConnection()) {
                    PreparedStatement ps = c.prepareStatement(
                            "DELETE FROM penjualan WHERE id_penjualan = ?"
                    );
                    ps.setString(1, id);
                    ps.executeUpdate();
                } catch (Exception e) {
                    JOptionPane.showMessageDialog(this, "Gagal hapus: " + e.getMessage());
                }

                loadTableRiwayatPenjualan();
            }

            return;
        }

        // ==========================
        // HAPUS DATA RESTOCK
        // ==========================
        if (idx == 1) {
            int row = tblRestock.getSelectedRow();
            if (row < 0) {
                JOptionPane.showMessageDialog(this, "Pilih data restock dulu!");
                return;
            }

            String idRestock = tblRestock.getValueAt(row, 0).toString();

            int confirm = JOptionPane.showConfirmDialog(
                    this,
                    "Yakin hapus restock " + idRestock + "?\nDetail restock juga hilang!",
                    "Konfirmasi",
                    JOptionPane.YES_NO_OPTION
            );

            if (confirm == JOptionPane.YES_OPTION) {
                try (Connection c = DBConnection.getConnection()) {

    // 1. HAPUS DETAIL RESTOCK DULU
    PreparedStatement psDetail = c.prepareStatement(
            "DELETE FROM detail_restock WHERE id_restock = ?"
    );
    psDetail.setString(1, idRestock);
    psDetail.executeUpdate();

    // 2. BARU HAPUS HEADER RESTOCK
    PreparedStatement psHeader = c.prepareStatement(
            "DELETE FROM restock WHERE id_restock = ?"
    );
    psHeader.setString(1, idRestock);
    psHeader.executeUpdate();

    JOptionPane.showMessageDialog(this,
            "Restock " + idRestock + " berhasil dihapus!");

} catch (Exception e) {
    JOptionPane.showMessageDialog(this, "Gagal hapus: " + e.getMessage());
}

                loadTableRestock();
            }
        }
    }//GEN-LAST:event_btnHapusPenjualanActionPerformed

    private void btnClearPenjualanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnClearPenjualanActionPerformed
         int idx = jTabbedPenjualan.getSelectedIndex();

    // =====================================================
    // CLEAR ALL DATA PENJUALAN
    // =====================================================
    if (idx == 0) {

        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Hapus SEMUA riwayat penjualan?\n"
                + "Detail penjualan & pembayaran juga akan hilang!",
                "Konfirmasi",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm != JOptionPane.YES_OPTION) {
            return;
        }

        try (Connection conn = DBConnection.getConnection()) {

            // Hapus tabel penjualan (DETAIL & PEMBAYARAN ikut terhapus via CASCADE)
            String sql = "DELETE FROM penjualan";
            PreparedStatement ps = conn.prepareStatement(sql);
            ps.executeUpdate();

            JOptionPane.showMessageDialog(this, "Semua riwayat penjualan berhasil dihapus!");

            loadTableRiwayatPenjualan();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, "Gagal clear: " + e.getMessage());
            e.printStackTrace();
        }

        return;
    }

    // =====================================================
    // CLEAR ALL DATA RESTOCK
    // =====================================================
    if (idx == 1) {

        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Hapus SEMUA riwayat restock?\n"
                + "Detail restock juga akan hilang!",
                "Konfirmasi",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm != JOptionPane.YES_OPTION) {
            return;
        }

        try (Connection conn = DBConnection.getConnection()) {

            // Pertama hapus DETAIL RESTOCK agar tidak kena foreign key
            PreparedStatement ps1 = conn.prepareStatement("DELETE FROM detail_restock");
            ps1.executeUpdate();

            // Baru hapus tabel RESTOCK
            PreparedStatement ps2 = conn.prepareStatement("DELETE FROM restock");
            ps2.executeUpdate();

            JOptionPane.showMessageDialog(this, "Semua riwayat restock berhasil dihapus!");

            loadTableRestock();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, "Gagal clear restock: " + e.getMessage());
            e.printStackTrace();
        }
    }                // TODO add your handling code here:
    }//GEN-LAST:event_btnClearPenjualanActionPerformed

    private void btnCetakPenjualanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCetakPenjualanActionPerformed
          int selected = jTabbedPenjualan.getSelectedIndex();

    if (selected == 0) {
        // ==============================
        // TAB RIWAYAT PENJUALAN
        // ==============================
        String path = "src/Report/ReportRiwayatPenjualan.jrxml";
        report.ReportUtil.showReport(path, null);
    } 
    else if (selected == 1) {
        // ==============================
        // TAB RESTOCK
        // ==============================
        String path = "src/Report/ReportRestok.jrxml";
        report.ReportUtil.showReport(path, null);
    }      // TODO add your handling code here:
    }//GEN-LAST:event_btnCetakPenjualanActionPerformed

    private void btnDeleteHistoriActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDeleteHistoriActionPerformed
        int row = tblHistoriPembayaran.getSelectedRow();
        if (row == -1) {
            JOptionPane.showMessageDialog(this, "Pilih data yang ingin dihapus!");
            return;
        }

        String idPembayaran = tblHistoriPembayaran.getValueAt(row, 0).toString();

        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Yakin ingin menghapus " + idPembayaran + "?",
                "Konfirmasi",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm != JOptionPane.YES_OPTION) {
            return;
        }

        PembayaranService service = new PembayaranService();

        if (service.delete(idPembayaran)) {
            JOptionPane.showMessageDialog(this, "Data berhasil dihapus!");
            loadHistoriPembayaran();

        } else {
            JOptionPane.showMessageDialog(this, "Gagal menghapus data!");
        }        // TODO add your handling code here:
    }//GEN-LAST:event_btnDeleteHistoriActionPerformed

    private void btnClearAllHistoriActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnClearAllHistoriActionPerformed
        int confirm = JOptionPane.showConfirmDialog(
                this,
                "Hapus semua histori pembayaran?",
                "Konfirmasi",
                JOptionPane.YES_NO_OPTION
        );

        if (confirm != JOptionPane.YES_OPTION) {
            return;
        }

        PembayaranService service = new PembayaranService();
        

        if (service.deleteAll()) {
            JOptionPane.showMessageDialog(this, "Semua histori berhasil dihapus!");
            loadHistoriPembayaran();
        } else {
            JOptionPane.showMessageDialog(this, "Gagal menghapus semua data!");
        }        // TODO add your handling code here:
    }//GEN-LAST:event_btnClearAllHistoriActionPerformed

    private void btnPrintHistoriActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPrintHistoriActionPerformed
         String path = "src/Report/ReportHistoriPembayaran.jrxml";
    report.ReportUtil.showReport(path, null);        // TODO add your handling code here:
    }//GEN-LAST:event_btnPrintHistoriActionPerformed

    private void btnTambahPenjualanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTambahPenjualanActionPerformed
        // Tambah Restock
        int idx = jTabbedPenjualan.getSelectedIndex();
        if (idx != 1) {
            return; // hanya untuk tab RESTOCK
        }
        DialogRestock d = new DialogRestock(this, true);
        d.setAdminInfo(idPegawaiLogin, namaPegawaiLogin);
        d.setLocationRelativeTo(this);
        d.setVisible(true);

        if (d.isSaved()) {
            loadTableRestock();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_btnTambahPenjualanActionPerformed

    private void JtabbedPenjualan(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_JtabbedPenjualan
        int idx = jTabbedPenjualan.getSelectedIndex();

        // TAB 0 = Riwayat Penjualan
        if (idx == 0) {
            btnTambahPenjualan.setEnabled(false);
            btnUbahPenjualan.setEnabled(false);

            loadTableRiwayatPenjualan();
        }

        // TAB 1 = Restock
        if (idx == 1) {
            btnTambahPenjualan.setEnabled(true);
            btnUbahPenjualan.setEnabled(false); // restock tidak punya edit
            btnHapusPenjualan.setEnabled(true);

            loadTableRestock();
        }
        // TODO add your handling code here:
    }//GEN-LAST:event_JtabbedPenjualan

    private void panelRiwayatPenjualanMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelRiwayatPenjualanMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_panelRiwayatPenjualanMouseClicked

    private void menuItemRefreshActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuItemRefreshActionPerformed
          JOptionPane.showMessageDialog(this,
        "Dashboard berhasil direfresh!",
        "Informasi",
        JOptionPane.INFORMATION_MESSAGE);

    refreshDashboard(); // method kamu       // TODO add your handling code here:
    }//GEN-LAST:event_menuItemRefreshActionPerformed

    private void menuItemJadiKasirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuItemJadiKasirActionPerformed
        int opsi = JOptionPane.showConfirmDialog(
            this,
            "Anda yakin ingin pindah ke mode Kasir?",
            "Konfirmasi",
            JOptionPane.YES_NO_OPTION
    );

    if (opsi == JOptionPane.YES_OPTION) {
        new KasirDashboard(idPegawaiLogin, namaUser).setVisible(true);
        dispose();
    }    // TODO add your handling code here:
    }//GEN-LAST:event_menuItemJadiKasirActionPerformed

    private void menuItemLogoutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuItemLogoutActionPerformed
       int confirm = JOptionPane.showConfirmDialog(
        this,
        "Yakin ingin logout?",
        "Konfirmasi Logout",
        JOptionPane.YES_NO_OPTION
    );

    if (confirm == JOptionPane.YES_OPTION) {
        JOptionPane.showMessageDialog(this, 
            "Logout berhasil!",
            "Informasi",
            JOptionPane.INFORMATION_MESSAGE);

        new LoginFrame().setVisible(true);
        dispose();
    }
        // TODO add your handling code here:
    }//GEN-LAST:event_menuItemLogoutActionPerformed

    private void menuItemUbahPasswordActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuItemUbahPasswordActionPerformed
       int pilih = JOptionPane.showConfirmDialog(
            this,
            "Yakin mau pindah ke halaman ubah password?",
            "Konfirmasi",
            JOptionPane.YES_NO_OPTION,
            JOptionPane.QUESTION_MESSAGE
    );

    if (pilih == JOptionPane.YES_OPTION) {
        JOptionPane.showMessageDialog(
                this,
                "Membuka form ubah password...",
                "Informasi",
                JOptionPane.INFORMATION_MESSAGE
        );

        new ForgotPasswordFrame().setVisible(true);
        dispose(); // opsional, sama kayak tadi
    } else {
        JOptionPane.showMessageDialog(
                this,
                "Aksi dibatalkan.",
                "Informasi",
                JOptionPane.INFORMATION_MESSAGE
        );
    }

   
    dispose();// opsional, kalau mau nutup admin dashboard
    }//GEN-LAST:event_menuItemUbahPasswordActionPerformed

    private void menuItemAboutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuItemAboutActionPerformed
          JOptionPane.showMessageDialog(this,
        "Aplikasi Toko Skincare\nVersi 1.0\nDeveloped by Bang Ryooooo",
        "Tentang Aplikasi",
        JOptionPane.INFORMATION_MESSAGE);   // TODO add your handling code here:
    }//GEN-LAST:event_menuItemAboutActionPerformed

    /**
     * @param args the command line arguments
     */
   

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCetak;
    private javax.swing.JButton btnCetakPenjualan;
    private javax.swing.JButton btnClear;
    private javax.swing.JButton btnClearAllHistori;
    private javax.swing.JButton btnClearPenjualan;
    private javax.swing.JButton btnDeleteHistori;
    private javax.swing.JButton btnDetail;
    private javax.swing.JButton btnHapus;
    private javax.swing.JButton btnHapusPenjualan;
    private javax.swing.JButton btnLogout5;
    private javax.swing.JButton btnPrintHistori;
    private javax.swing.JButton btnTambah;
    private javax.swing.JButton btnTambahPenjualan;
    private javax.swing.JButton btnUbah;
    private javax.swing.JButton btnUbahPenjualan;
    private javax.swing.JButton btnUpload;
    private javax.swing.JPanel cardBarangTerjual;
    private javax.swing.JPanel cardOmset;
    private javax.swing.JPanel cardTransaksi;
    private javax.swing.JPanel dashboard2;
    private javax.swing.JPanel dashboard3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane8;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JTabbedPane jTabbedPenjualan;
    private javax.swing.JLabel lblBarangTerjual;
    private javax.swing.JLabel lblNavDashboard;
    private javax.swing.JLabel lblNavKeuangan;
    private javax.swing.JLabel lblNavRiwayat;
    private javax.swing.JLabel lblOmsetFix;
    private javax.swing.JLabel lblOmsetTitle;
    private javax.swing.JLabel lblStokKritisTitle;
    private javax.swing.JLabel lblTerlarisTitle;
    private javax.swing.JLabel lblTitle1;
    private javax.swing.JLabel lblTitle2;
    private javax.swing.JLabel lblTitle4;
    private javax.swing.JLabel lblTotalTransaksi;
    private javax.swing.JLabel lblTotalTransaksi1;
    private javax.swing.JLabel lblTransaksiTitle;
    private javax.swing.JLabel lblTransaksiTitle1;
    private javax.swing.JLabel lblTransaksiTitle2;
    private javax.swing.JMenu menuAksi;
    private javax.swing.JMenuBar menuBarMain;
    private javax.swing.JMenuItem menuItemAbout;
    private javax.swing.JMenuItem menuItemJadiKasir;
    private javax.swing.JMenuItem menuItemLogout;
    private javax.swing.JMenuItem menuItemRefresh;
    private javax.swing.JMenuItem menuItemUbahPassword;
    private javax.swing.JMenu menuProfile;
    private javax.swing.JPanel panelAtas;
    private javax.swing.JPanel panelContent;
    private javax.swing.JPanel panelDashboard;
    private javax.swing.JPanel panelIndicatorDashboard;
    private javax.swing.JPanel panelIndicatorKeuangan;
    private javax.swing.JPanel panelIndicatorMaster;
    private javax.swing.JPanel panelIndicatorRiwayat;
    private javax.swing.JPanel panelKeuangan;
    private javax.swing.JPanel panelMasterActions;
    private javax.swing.JPanel panelMasterActions1;
    private javax.swing.JPanel panelMasterActions2;
    private javax.swing.JPanel panelMasterData;
    private javax.swing.JPanel panelNavDashboard;
    private javax.swing.JPanel panelNavKeuangan;
    private javax.swing.JPanel panelNavMaster;
    private javax.swing.JPanel panelNavRiwayat;
    private javax.swing.JPanel panelRiwayatPenjualan;
    private javax.swing.JPanel panelSidebar;
    private javax.swing.JPanel panelUtama;
    private javax.swing.JScrollPane scrollHistoriPembayaran;
    private javax.swing.JScrollPane scrollRestock;
    private javax.swing.JScrollPane scrollRiwayatPenjualan;
    private javax.swing.JScrollPane scrollStokKritis;
    private javax.swing.JScrollPane scrollTerlaris;
    private javax.swing.JTabbedPane tabKeuangan;
    private javax.swing.JTabbedPane tabMasterData;
    private javax.swing.JTable tableBarang;
    private javax.swing.JTable tableJenisPembayaran;
    private javax.swing.JTable tableKategori;
    private javax.swing.JTable tablePegawai;
    private javax.swing.JTable tablePembeli;
    private javax.swing.JTable tableSupplier;
    private javax.swing.JTable tblHistoriPembayaran;
    private javax.swing.JTable tblRestock;
    private javax.swing.JTable tblRiwayatPenjualan;
    private javax.swing.JTable tblStokKritis;
    private javax.swing.JTable tblTerlaris;
    // End of variables declaration//GEN-END:variables

    private void showPanel(String name) {
        CardLayout cl = (CardLayout) panelContent.getLayout();
        cl.show(panelContent, name);
    }

    private void setActiveIndicator(JPanel indicator) {
        panelIndicatorDashboard.setVisible(false);
        panelIndicatorMaster.setVisible(false);
        panelIndicatorRiwayat.setVisible(false);
        panelIndicatorKeuangan.setVisible(false);

        indicator.setVisible(true);
    }

    private void setActiveMenu(JPanel active) {
        JPanel[] menus = {
            panelNavDashboard,
            panelNavMaster,
            panelNavRiwayat,
            panelNavKeuangan
        };

        for (JPanel p : menus) {
            p.setBackground(new java.awt.Color(245, 245, 245));
        }

        active.setBackground(new java.awt.Color(220, 220, 255));
    }

    private void hideAllSubMenus() {
        throw new UnsupportedOperationException("Not supported yet."); // Generated from nbfs://nbhost/SystemFileSystem/Templates/Classes/Code/GeneratedMethodBody
    }

    private void loadTableKategori() {
        KategoriService service = new KategoriService();
        List<Kategori> data = service.getAll();

        DefaultTableModel model = new DefaultTableModel(
                new String[]{"ID Kategori", "Nama Kategori"}, 0
        );

        for (Kategori k : data) {
            model.addRow(new Object[]{
                k.getIdKategori(),
                k.getNamaKategori()
            });
        }

       
        tableKategori.setModel(model);
formatTableKategori();

    }
    
        private void formatTableKategori() {
    setColumnAlignment(tableKategori, 0, JLabel.CENTER); // ID
    setColumnAlignment(tableKategori, 1, JLabel.LEFT);   // Nama
}


    private void loadTableSupplier() {
        SupplierService service = new SupplierService();
        List<Supplier> list = service.getAll();

        String[] cols = {"ID Supplier", "Nama Supplier", "Kontak", "Alamat"};
        javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel(cols, 0);

        for (Supplier s : list) {
            model.addRow(new Object[]{
                s.getIdSupplier(),
                s.getNamaSupplier(),
                s.getKontak(),
                s.getAlamat()
            });
        }

        tableSupplier.setModel(model);
       
formatTableSupplier();

        
    }
    private void formatTableSupplier() {
    setColumnAlignment(tableSupplier, 0, JLabel.CENTER); // ID
    setColumnAlignment(tableSupplier, 1, JLabel.LEFT);   // Nama
    setColumnAlignment(tableSupplier, 2, JLabel.LEFT);   // Kontak
    setColumnAlignment(tableSupplier, 3, JLabel.LEFT);   // Alamat
}


    private void loadTablePembeli() {
        PembeliService service = new PembeliService();
        List<Pembeli> list = service.getAll();

        String[] cols = {"ID Pembeli", "Nama Pembeli", "No Telepon", "Alamat"};
        javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel(cols, 0);

        for (Pembeli p : list) {
            model.addRow(new Object[]{
                p.getIdPembeli(),
                p.getNamaPembeli(),
                p.getNoTelepon(),
                p.getAlamat()
            });
        }

        tablePembeli.setModel(model);
formatTablePembeli();

    }
    
            private void formatTablePembeli() {
    setColumnAlignment(tablePembeli, 0, JLabel.CENTER);
    setColumnAlignment(tablePembeli, 1, JLabel.LEFT);
    setColumnAlignment(tablePembeli, 2, JLabel.LEFT);
    setColumnAlignment(tablePembeli, 3, JLabel.LEFT);
}


    private void loadTablePegawai() {
        PegawaiService service = new PegawaiService();
        List<Pegawai> list = service.getAll();

        String[] cols = {"ID Pegawai", "Nama Pegawai", "Jabatan", "Username", "Password"};
        DefaultTableModel model = new DefaultTableModel(cols, 0);

        for (Pegawai p : list) {
            model.addRow(new Object[]{
                p.getId(),
                p.getNama(),
                p.getJabatan(),
                p.getUsername(),
                p.getPassword() // tampilkan
            });
        }

       
        tablePegawai.setModel(model);
formatTablePegawai();

    }
    
        private void formatTablePegawai() {
    setColumnAlignment(tablePegawai, 0, JLabel.CENTER); // ID
    setColumnAlignment(tablePegawai, 1, JLabel.LEFT);   // Nama
    setColumnAlignment(tablePegawai, 2, JLabel.CENTER); // Jabatan
    setColumnAlignment(tablePegawai, 3, JLabel.LEFT);   // Username
    setColumnAlignment(tablePegawai, 4, JLabel.LEFT);   // Password
}


    private void loadTableBarang() {
        BarangService service = new BarangService();
        List<Barang> list = service.getAll();

        String[] cols = {"ID Barang", "Nama Barang", "Kategori", "Harga", "Stock"};
        javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel(cols, 0);

        for (Barang b : list) {
            model.addRow(new Object[]{
                b.getIdBarang(),
                b.getNamaBarang(),
                b.getNamaKategori(),
                b.getHarga(),
                b.getStock()
            });
        }

        tableBarang.setModel(model);
        
formatTableBarang();

    }
    
        private void formatTableBarang() {
    setColumnAlignment(tableBarang, 0, JLabel.CENTER); // ID
    setColumnAlignment(tableBarang, 1, JLabel.LEFT);   // Nama
    setColumnAlignment(tableBarang, 2, JLabel.LEFT);   // Kategori
    setColumnAlignment(tableBarang, 3, JLabel.RIGHT);  // Harga
    setColumnAlignment(tableBarang, 4, JLabel.RIGHT);  // Stok
}


    //blom
    private void loadDataBarang() {
        BarangService service = new BarangService();
        List<Barang> list = service.getAll();

        String[] cols = {"ID Barang", "Nama Barang", "Kategori", "Harga", "Stock"};
        DefaultTableModel model = new DefaultTableModel(cols, 0);

        for (Barang b : list) {
            model.addRow(new Object[]{
                b.getIdBarang(),
                b.getNamaBarang(),
                b.getIdKategori(),
                b.getHarga(),
                b.getStock()
            });
        }

        tableBarang.setModel(model);
    }

    private void setupTableHistoriPembayaran() {
        DefaultTableModel model = new DefaultTableModel();
        model.addColumn("ID Pembayaran");
        model.addColumn("ID Penjualan");
        model.addColumn("Nama Pembeli");
        model.addColumn("Metode");
        model.addColumn("Total");
        model.addColumn("Bayar");
        model.addColumn("Kembalian");
        model.addColumn("Tanggal");

        tblHistoriPembayaran.setModel(model);
        formatHistoriPembayaran();

    }
    
        private void formatHistoriPembayaran() {
    // Center
    setColumnAlignment(tblHistoriPembayaran, 0, JLabel.CENTER);
    setColumnAlignment(tblHistoriPembayaran, 1, JLabel.CENTER);
    setColumnAlignment(tblHistoriPembayaran, 7, JLabel.CENTER);

    // Left
    setColumnAlignment(tblHistoriPembayaran, 2, JLabel.LEFT);
    setColumnAlignment(tblHistoriPembayaran, 3, JLabel.LEFT);

    // Right
    setColumnAlignment(tblHistoriPembayaran, 4, JLabel.RIGHT);
    setColumnAlignment(tblHistoriPembayaran, 5, JLabel.RIGHT);
    setColumnAlignment(tblHistoriPembayaran, 6, JLabel.RIGHT);
}


    private void loadTableJenisPembayaran() {
        JenisPembayaranService service = new JenisPembayaranService();
        List<JenisPembayaran> list = service.getAll();

        String[] cols = {"ID Jenis", "Nama Jenis", "Keterangan"};
        DefaultTableModel model = new DefaultTableModel(cols, 0);

        for (JenisPembayaran jp : list) {
            model.addRow(new Object[]{
                jp.getIdJenis(),
                jp.getNamaJenis(),
                jp.getKeterangan()
            });
        }

       
        tableJenisPembayaran.setModel(model);
formatTableJenisPembayaran();


    }
    
        private void formatTableJenisPembayaran() {
    setColumnAlignment(tableJenisPembayaran, 0, JLabel.CENTER);
    setColumnAlignment(tableJenisPembayaran, 1, JLabel.LEFT);
    setColumnAlignment(tableJenisPembayaran, 2, JLabel.LEFT);
}


    private void loadTableRiwayatPenjualan() {
        PenjualanService service = new PenjualanService();
        List<Object[]> list = service.getRiwayatPenjualan();

        DefaultTableModel model = (DefaultTableModel) tblRiwayatPenjualan.getModel();
        model.setRowCount(0); // clear dulu biar tidak dobel

        for (Object[] row : list) {
            model.addRow(row);
            formatTableRiwayatPenjualan();

        }
         formatTableRiwayatPenjualan();

    }
    private void formatTableRiwayatPenjualan() {
    // Center
    setColumnAlignment(tblRiwayatPenjualan, 0, JLabel.CENTER); // ID Penjualan
    setColumnAlignment(tblRiwayatPenjualan, 1, JLabel.CENTER); // Kasir
    setColumnAlignment(tblRiwayatPenjualan, 7, JLabel.CENTER); // Tanggal

    // Left
    setColumnAlignment(tblRiwayatPenjualan, 2, JLabel.LEFT);  // Nama Pembeli
    setColumnAlignment(tblRiwayatPenjualan, 3, JLabel.LEFT);  // Metode

    // Right (angka)
    setColumnAlignment(tblRiwayatPenjualan, 4, JLabel.RIGHT); // Total
    setColumnAlignment(tblRiwayatPenjualan, 5, JLabel.RIGHT); // Bayar
    setColumnAlignment(tblRiwayatPenjualan, 6, JLabel.RIGHT); // Kembalian
}


    private void loadTableRestock() {
        RestockService service = new RestockService();
        List<Object[]> list = service.getRiwayatRestock();

        DefaultTableModel model = (DefaultTableModel) tblRestock.getModel();
        model.setRowCount(0);

        for (Object[] row : list) {
            model.addRow(row);
          

        }
          formatTableRestock();
    }
    private void formatTableRestock() {
    // Center
    setColumnAlignment(tblRestock, 0, JLabel.CENTER); // ID Restock
    setColumnAlignment(tblRestock, 1, JLabel.CENTER); // Admin
    setColumnAlignment(tblRestock, 4, JLabel.CENTER); // Tanggal

    // Left
    setColumnAlignment(tblRestock, 2, JLabel.LEFT);   // Supplier

    // Right
    setColumnAlignment(tblRestock, 3, JLabel.RIGHT);  // Total Item
}


     private void loadDataRiwayat() {
        loadTableRiwayatPenjualan();
    }

   private void styleTableHeader(JTable table) {
    JTableHeader header = table.getTableHeader();
    header.setFont(new Font("Segoe UI", Font.BOLD, 14));
    header.setBackground(new Color(0, 153, 204)); 
 header.setForeground(new Color(0, 0, 102));   
 
    DefaultTableCellRenderer renderer =
        (DefaultTableCellRenderer) header.getDefaultRenderer();

    renderer.setHorizontalAlignment(JLabel.CENTER);
    renderer.setOpaque(true);
}

private void styleTabs(JTabbedPane tabs) {
    tabs.setFont(new Font("Segoe UI", Font.BOLD, 14));
    tabs.setOpaque(true);

    // warna teks tab
    tabs.setForeground(new Color(0, 0, 102));

    // warna background awal untuk semua tab
    for (int i = 0; i < tabs.getTabCount(); i++) {
        tabs.setBackgroundAt(i, new Color(0, 204, 230)); // normal [0,204,204]
    }

    // set warna tab aktif saat ini
    tabs.setBackgroundAt(tabs.getSelectedIndex(), new Color(0, 204, 204));

    // biar tab aktif berubah warna saat dipilih
    tabs.addChangeListener(e -> {
        for (int i = 0; i < tabs.getTabCount(); i++) {
            tabs.setBackgroundAt(i, new Color(200,200,255)); // normal
        }
        tabs.setBackgroundAt(
            tabs.getSelectedIndex(), 
            new Color(150,150,255) // aktif
        );
    });
}

        private void setColumnAlignment(JTable table, int columnIndex, int alignment) {
    DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
    renderer.setHorizontalAlignment(alignment);
    table.getColumnModel().getColumn(columnIndex).setCellRenderer(renderer);
}
private void loadDashboardData() {
    hitungRingkasanHariIni();
    loadBarangTerlaris();
    loadStokKritis();
}


private void setTableModels() {
    // Table BARANG TERLARIS
    DefaultTableModel modelTerlaris = new DefaultTableModel(
            new String[]{"Nama Barang", "Jumlah Terjual", "Pendapatan"}, 0
    );
    tblTerlaris.setModel(modelTerlaris);

    // Table STOK KRITIS
    DefaultTableModel modelStok = new DefaultTableModel(
            new String[]{"Nama Barang", "Stok", "Kategori"}, 0
    );
    tblStokKritis.setModel(modelStok);
}

   private void loadStokKritis() {
    DefaultTableModel model = (DefaultTableModel) tblStokKritis.getModel();
    model.setRowCount(0); // clear

    String sql =
        "SELECT b.nama_barang, b.stock, k.nama_kategori " +
        "FROM barang b " +
        "LEFT JOIN kategori k ON k.id_kategori = b.id_kategori " +
        "WHERE b.stock <= 5 " +
        "ORDER BY b.stock ASC";

    try (Connection c = DBConnection.getConnection();
         PreparedStatement ps = c.prepareStatement(sql);
         ResultSet rs = ps.executeQuery()) {

        while (rs.next()) {
            model.addRow(new Object[]{
                    rs.getString("nama_barang"),
                    rs.getInt("stock"),
                    rs.getString("nama_kategori")
            });
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}


private void loadBarangTerlaris() {
    DefaultTableModel model = (DefaultTableModel) tblTerlaris.getModel();
    model.setRowCount(0); // clear

    String sql =
        "SELECT b.nama_barang, SUM(dp.jumlah) AS jumlah, SUM(dp.subtotal) AS pendapatan " +
        "FROM detail_penjualan dp " +
        "JOIN barang b ON b.id_barang = dp.id_barang " +
        "JOIN penjualan pj ON pj.id_penjualan = dp.id_penjualan " +
        "WHERE pj.tanggal = CURRENT_DATE " +
        "GROUP BY b.nama_barang " +
        "ORDER BY jumlah DESC " +
        "LIMIT 5";

    try (Connection c = DBConnection.getConnection();
         PreparedStatement ps = c.prepareStatement(sql);
         ResultSet rs = ps.executeQuery()) {

        while (rs.next()) {
            model.addRow(new Object[]{
                    rs.getString("nama_barang"),
                    rs.getInt("jumlah"),
                    rs.getDouble("pendapatan")
            });
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}


private void hitungRingkasanHariIni() {
   String sql =
    "SELECT " +
    "COUNT(pj.id_penjualan) AS total_transaksi, " +
    "COALESCE(SUM(dp.jumlah), 0) AS barang_terjual, " +
    "COALESCE(SUM(pj.total), 0) AS omset " +
    "FROM penjualan pj " +
    "LEFT JOIN detail_penjualan dp ON dp.id_penjualan = pj.id_penjualan " +
    "WHERE pj.tanggal::date = CURRENT_DATE";


    try (Connection c = DBConnection.getConnection();
         PreparedStatement ps = c.prepareStatement(sql);
         ResultSet rs = ps.executeQuery()) {

        if (rs.next()) {

            int totalTransaksi = rs.getInt("total_transaksi");
            int barangTerjual = rs.getInt("barang_terjual");
            double omset = rs.getDouble("omset");

            lblTotalTransaksi.setText(String.valueOf(totalTransaksi));
            lblTotalTransaksi1.setText(String.valueOf(barangTerjual));

            // FORMAT UANG AMAN
            String formattedOmset = String.format("Rp %, .0f", omset).replace(",", ".");
            lblOmsetFix.setText(formattedOmset);

            System.out.println("DEBUG OMSET = " + omset);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}






        public void refreshDashboard() {

            // ======================
            // REFRESH SUMMARY CARD
            // ======================
            hitungRingkasanHariIni();   // ini sekarang update ke lblOmsetFix

            // ======================
            // REFRESH DASHBOARD TABLES
            // ======================
            loadBarangTerlaris();
            loadStokKritis();

            // ======================
            // REFRESH MASTER TABLES
            // ======================
            loadTableKategori();
            loadTableSupplier();
            loadTableBarang();
            loadTablePegawai();
            loadTablePembeli();
            loadTableJenisPembayaran();

            // ======================
            // REFRESH RIWAYAT
            // ======================
            loadTableRiwayatPenjualan();
            loadTableRestock();

            System.out.println("Dashboard refreshed!");
        }

            private void alignPendapatanColumn() {
            DefaultTableCellRenderer right = new DefaultTableCellRenderer();
            right.setHorizontalAlignment(JLabel.RIGHT);

            // kolom 2 = Pendapatan
            tblTerlaris.getColumnModel().getColumn(2).setCellRenderer(right);
        }






        public class RoundedPanel extends JPanel {
            private int radius = 20;

            public RoundedPanel(int radius) {
                this.radius = radius;
                setOpaque(false);
            }

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2 = (Graphics2D) g;
                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2.setColor(getBackground());
                g2.fillRoundRect(0, 0, getWidth(), getHeight(), radius, radius);
            }
        }


        private void styleCardRounded(JPanel panel) {

            panel.setBorder(BorderFactory.createCompoundBorder(
                    BorderFactory.createLineBorder(new Color(210, 210, 230), 2, true), 
                    BorderFactory.createEmptyBorder(15, 15, 15, 15)
            ));
        }

     private void applyDashboardStyle() {

    Color borderBlue = new Color(25, 35, 80);

    // === Set font manual (Poppins / Montserrat / Nunito) ===
    Font titleFont = new Font("Tahoma", Font.BOLD, 18);
    Font bigFont   = new Font("Tahoma", Font.BOLD, 50);

    // === Apply to card titles ===
    lblTransaksiTitle.setFont(titleFont);
    lblTransaksiTitle.setForeground(Color.WHITE);

    lblBarangTerjual.setFont(titleFont);
    lblBarangTerjual.setForeground(Color.WHITE);

    lblOmsetTitle.setFont(titleFont);
    lblOmsetTitle.setForeground(Color.WHITE);

    // === Apply angka besar (PUTIH + outline navy) ===
    lblTotalTransaksi.setFont(bigFont);
    lblTotalTransaksi.setForeground(Color.WHITE);

    lblTotalTransaksi1.setFont(bigFont);
    lblTotalTransaksi1.setForeground(Color.WHITE);

    lblOmsetFix.setFont(bigFont);
    lblOmsetFix.setForeground(Color.WHITE);

    // === STYLE BORDER CARD NAVY ===
    styleCardColor(cardTransaksi);
    styleCardColor(cardBarangTerjual);
    styleCardColor(cardOmset);

    // === TABLE HEADER ===
    styleTableSoft(tblTerlaris);
    styleTableSoft(tblStokKritis);

    alignPendapatanColumn();
}



           private void styleTableSoft(JTable table) {
        JTableHeader header = table.getTableHeader();

        header.setFont(new Font("Segoe UI", Font.BOLD, 13));
        header.setBackground(new Color(225, 225, 235)); // abu soft elegan
        header.setForeground(new Color(25, 35, 80));    // teks biru tua

        table.setRowHeight(28);
    }




    private void styleCardColor(JPanel panel) {
        // BIRU TUA NAVY (border tegas)
        Color borderBlue = new Color(25, 35, 80);

        panel.setBorder(
            BorderFactory.createCompoundBorder(
                BorderFactory.createLineBorder(borderBlue, 3, true),
                BorderFactory.createEmptyBorder(25, 25, 25, 25)
            )
        );
    }

   public class OutlinedLabel extends JLabel {

    private Color outlineColor = new Color(25, 35, 80); // navy
    private int strokeWidth = 3;

    public OutlinedLabel() {
        super();
        setOpaque(false);
    }

    public OutlinedLabel(String text) {
        super(text);
        setOpaque(false);
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        Font font = getFont();
        g2.setFont(font);

        String text = getText();

        // Hitung posisi teks biar EXACT di tengah (sesuai JLabel)
        int textWidth  = g2.getFontMetrics().stringWidth(text);
        int textHeight = g2.getFontMetrics().getHeight();

        int x = (getWidth()  - textWidth)  / 2;
        int y = (getHeight() - textHeight) / 2 + g2.getFontMetrics().getAscent();

        // Outline
        g2.setStroke(new java.awt.BasicStroke(strokeWidth));
        g2.setColor(outlineColor);
        g2.drawGlyphVector(font.createGlyphVector(g2.getFontRenderContext(), text), x, y);

        // Isi teks
        g2.setColor(getForeground());
        g2.drawString(text, x, y);

        g2.dispose();
    }
}









    



}
